{"version":3,"sources":["progres.js"],"names":["document","addEventListener","circleProgress","selector","wrapper","querySelectorAll","Array","prototype","forEach","call","i","wrapperWidth","wrapperHeight","percent","innerHTML","context","lineWidth","centerX","centerY","radius","newPercent","speed","from","to","duration","start","strokeStyle","text","getValues","parseInt","window","getComputedStyle","width","getAttribute","querySelector","canvas","style","height","getContext","Date","getTime","animate","requestAnimationFrame","time","x","easeInOutQuart","Math","round","drawArc","circleStart","PI","circleEnd","clearRect","beginPath","arc","stroke","update","btnUpdate","setAttribute","getRandom","resizeTimer","clearTimeout","setTimeout","t","b","c","d","min","max","random"],"mappings":"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","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n\r\n    var circleProgress = (function(selector) {\r\n        var wrapper = document.querySelectorAll(selector);\r\n        Array.prototype.forEach.call(wrapper, function(wrapper, i) {\r\n            var wrapperWidth,\r\n                wrapperHeight,\r\n                percent,\r\n                innerHTML,\r\n                context,\r\n                lineWidth,\r\n                centerX,\r\n                centerY,\r\n                radius,\r\n                newPercent,\r\n                speed,\r\n                from,\r\n                to,\r\n                duration,\r\n                start,\r\n                strokeStyle,\r\n                text;\r\n\r\n            var getValues = function() {\r\n                wrapperWidth = parseInt(window.getComputedStyle(wrapper).width);\r\n                wrapperHeight = wrapperWidth;\r\n                percent = wrapper.getAttribute('data-cp-percentage');\r\n                innerHTML = '<span class=\"percentage\"><strong>' + percent + '</strong> %</span><canvas class=\"circleProgressCanvas\" width=\"' + (wrapperWidth * 2) + '\" height=\"' + wrapperHeight * 2 + '\"></canvas>';\r\n                wrapper.innerHTML = innerHTML;\r\n                text = wrapper.querySelector(\".percentage\");\r\n                canvas = wrapper.querySelector(\".circleProgressCanvas\");\r\n                wrapper.style.height = canvas.style.width = canvas.style.height = wrapperWidth + \"px\";\r\n                context = canvas.getContext('2d');\r\n                centerX = canvas.width / 2;\r\n                centerY = canvas.height / 2;\r\n                newPercent = 0;\r\n                speed = 1;\r\n                from = 0;\r\n                to = percent;\r\n                duration = 1000;\r\n                lineWidth = 25;\r\n                radius = canvas.width / 2 - lineWidth;\r\n                strokeStyle = wrapper.getAttribute('data-cp-color');\r\n                start = new Date().getTime();\r\n            };\r\n\r\n            function animate() {\r\n                requestAnimationFrame(animate);\r\n                var time = new Date().getTime() - start;\r\n                if (time <= duration) {\r\n                    var x = easeInOutQuart(time, from, to - from, duration);\r\n                    newPercent = x;\r\n                    text.innerHTML = Math.round(newPercent) + \" %\";\r\n                    drawArc();\r\n                }\r\n            }\r\n\r\n            function drawArc() {\r\n                var circleStart = 1.5 * Math.PI;\r\n                var circleEnd = circleStart + (newPercent / 50) * Math.PI;\r\n                context.clearRect(0, 0, canvas.width, canvas.height);\r\n                context.beginPath();\r\n                context.arc(centerX, centerY, radius, circleStart, 4 * Math.PI, false);\r\n                context.lineWidth = lineWidth;\r\n                context.strokeStyle = \"#ddd\";\r\n                context.stroke();\r\n                context.beginPath();\r\n                context.arc(centerX, centerY, radius, circleStart, circleEnd, false);\r\n                context.lineWidth = lineWidth;\r\n                context.strokeStyle = strokeStyle;\r\n                context.stroke();\r\n\r\n            }\r\n            var update = function() {\r\n                getValues();\r\n                animate();\r\n            }\r\n            update();\r\n\r\n            var btnUpdate = document.querySelectorAll(\".btn-update\")[0];\r\n            btnUpdate.addEventListener(\"click\", function() {\r\n                wrapper.setAttribute(\"data-cp-percentage\", Math.round(getRandom(5, 95)));\r\n                update();\r\n            });\r\n            wrapper.addEventListener(\"click\", function() {\r\n                update();\r\n            });\r\n\r\n            var resizeTimer;\r\n            window.addEventListener(\"resize\", function() {\r\n                clearTimeout(resizeTimer);\r\n                resizeTimer = setTimeout(function() {\r\n                    clearTimeout(resizeTimer);\r\n                    start = new Date().getTime();\r\n                    update();\r\n                }, 250);\r\n            });\r\n        });\r\n\r\n        //\r\n        // http://easings.net/#easeInOutQuart\r\n        //  t: current time\r\n        //  b: beginning value\r\n        //  c: change in value\r\n        //  d: duration\r\n        //\r\n        function easeInOutQuart(t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\r\n            return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\r\n        }\r\n\r\n    });\r\n\r\n    circleProgress('.counter');\r\n\r\n    // Gibt eine Zufallszahl zwischen min (inklusive) und max (exklusive) zurÃ¼ck\r\n    function getRandom(min, max) {\r\n        return Math.random() * (max - min) + min;\r\n    }\r\n});"],"file":"progres.dev.js"}